<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Armedis | Starter</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="dist-bak/css/adminlte.min.css">

    <style>
        .color-palette {
          height: auto;
          min-height: 40px;
          min-width: 150px;
          max-width: 200px;
          line-height: 35px;
          text-align: right;
          padding-right: .75rem;
        }

        .color-palette.disabled {
          text-align: center;
          padding-right: 0;
          display: block;
        }

        .color-palette-set {
          margin-bottom: 15px;
        }

        .color-palette span {
          display: none;
          font-size: 17px;
        }

        .color-palette:hover span {
          display: block;
        }

        .color-palette.disabled span {
          display: block;
          text-align: left;
          padding-left: .75rem;
        }

        .color-palette-box h4 {
          position: absolute;
          left: 1.25rem;
          margin-top: .75rem;
          color: rgba(255, 255, 255, 0.8);
          font-size: 15px;
          display: block;
          z-index: 7;
        }
        .edit-button {
            height: 20px;
            width: 50px;
            float: right;
            font-size: 12px;
            margin: .5rem;
            padding: .1rem;
        }
        .edit-input {
            float: left;
            height: 30px;
            width: 49%;
            margin: .3rem;
            font-size: 14px;
        }
    </style>
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">
    <div id="sidebar"></div>
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <h1 class="m-0">Management-config</h1>
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->

        <!-- Main content -->
        <div class="content">
            <div class="container-fluid">
                <!-- COLOR PALETTE -->
                <div class="card card-default color-palette-box">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tag"></i>
                            Realtime Memory
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-indigo">memory purge</h4>
                                <div class="color-palette-set">
                                    <div class="bg-indigo color-palette"><span></span></div>
                                    <div class="bg-indigo disabled color-palette">
                                        <span id="memory-purge-value" style="float: left;"></span>
                                        <input type="text" class="form-control edit-input" id="memory-purge-new-value" style="display: none">
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="memory-purge-edit">Edit</button>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="memory-purge-submit" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-primary">activedefrag</h4>
                                <div class="color-palette-set">
                                    <div class="bg-primary color-palette"><span></span></div>
                                    <div class="bg-primary disabled color-palette">
                                        <span id="activedefrag-value" style="float: left;"></span>
                                        <input type="text" class="form-control edit-input" id="activedefrag-new-value" style="display: none">
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="activedefrag-edit">Edit</button>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="activedefrag-submit" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
                <!-- COLOR PALETTE -->
                <div class="card card-default color-palette-box">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tag"></i>
                            Server Memory
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-secondary">maxmemory-policy</h4>
                                <div class="color-palette-set">
                                    <div class="bg-secondary color-palette"><span></span></div>
                                    <div class="bg-secondary disabled color-palette">
                                        <span id="maxmemory-policy-value" style="float: left;"></span>
                                        <input type="text" class="form-control edit-input" id="maxmemory-policy-new-value" style="display: none">
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="maxmemory-policy-edit">Edit</button>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="maxmemory-policy-submit" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-info">maxmemory-samples</h4>
                                <div class="color-palette-set">
                                    <div class="bg-info color-palette"><span></span></div>
                                    <div class="bg-info disabled color-palette">
                                        <span id="maxmemory-samples-value" style="float: left;"></span>
                                        <input type="text" class="form-control edit-input" id="maxmemory-samples-new-value" style="display: none">
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="maxmemory-samples-edit">Edit</button>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="maxmemory-samples-submit" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-success">maxmemory</h4>
                                <div class="color-palette-set">
                                    <div class="bg-success color-palette"><span></span></div>
                                    <div class="bg-success disabled color-palette">
                                        <span id="maxmemory-value" style="float: left;"></span>
                                        <input type="text" class="form-control edit-input" id="maxmemory-new-value" style="display: none">
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="maxmemory-edit">Edit</button>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button" id="maxmemory-submit" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
                <!-- COLOR PALETTE -->
                <div class="card card-default color-palette-box">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tag"></i>
                            Clients
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-lightblue">timeout</h4>
                                <div class="color-palette-set">
                                    <div class="bg-lightblue color-palette"><span></span></div>
                                    <div class="bg-lightblue disabled color-palette">
                                        <span id="timeout-value" style="float: left;"></span>
                                        <input id="timeout-new-value" type="text" class="form-control edit-input" style="display: none">
                                        <button  id="timeout-edit" type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                        <button id="timeout-submit" type="button" class="btn btn-block btn-outline-light edit-button" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-navy">maxclients</h4>
                                <div class="color-palette-set">
                                    <div class="bg-navy color-palette"><span></span></div>
                                    <div class="bg-navy disabled color-palette">
                                        <span id="maxclients-value" style="float: left;"></span>
                                        <input id="maxclients-new-value" type="text" class="form-control edit-input" style="display: none">
                                        <button  id="maxclients-edit" type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                        <button id="maxclients-submit" type="button" class="btn btn-block btn-outline-light edit-button" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
                <!-- COLOR PALETTE -->
                <div class="card card-default color-palette-box">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tag"></i>
                            snapshot
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-teal">save</h4>
                                <div class="color-palette-set">
                                    <div class="bg-teal color-palette"><span></span></div>
                                    <div class="bg-teal disabled color-palette">
                                        <span id="save-value" style="float: left;"></span>
                                        <input id="save-new-value" type="text" class="form-control edit-input" style="display: none">
                                        <button  id="save-edit" type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                        <button id="save-submit" type="button" class="btn btn-block btn-outline-light edit-button" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-lightblue">appendonly</h4>
                                <div class="color-palette-set">
                                    <div class="bg-lightblue color-palette"><span></span></div>
                                    <div class="bg-lightblue disabled color-palette">
                                        <span id="appendonly-value" style="float: left;"></span>
                                        <input id="appendonly-new-value" type="text" class="form-control edit-input" style="display: none">
                                        <button  id="appendonly-edit" type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                        <button id="appendonly-submit" type="button" class="btn btn-block btn-outline-light edit-button" style="display: none">Submit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
                <!-- COLOR PALETTE -->
                <div class="card card-default color-palette-box">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tag"></i>
                            lazefree
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-orange">lazyfree-lazy-eviction</h4>
                                <div class="color-palette-set">
                                    <div class="bg-orange color-palette"><span></span></div>
                                    <div class="bg-orange disabled color-palette">
                                        <span id="lazyfree-lazy-eviction-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-maroon">lazyfree-lazy-expire</h4>
                                <div class="color-palette-set">
                                    <div class="bg-maroon color-palette"><span></span></div>
                                    <div class="bg-maroon disabled color-palette">
                                        <span id="lazyfree-lazy-expire-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-success">lazyfree-lazy-server-del</h4>
                                <div class="color-palette-set">
                                    <div class="bg-success color-palette"><span></span></div>
                                    <div class="bg-success disabled color-palette">
                                        <span id="lazyfree-lazy-server-del-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-gray">lazyfree-lazy-user-del</h4>
                                <div class="color-palette-set">
                                    <div class="bg-gray color-palette"><span></span></div>
                                    <div class="bg-gray disabled color-palette">
                                        <span id="lazyfree-lazy-user-del-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-pink">lazyfree-lazy-user-flush</h4>
                                <div class="color-palette-set">
                                    <div class="bg-pink color-palette"><span></span></div>
                                    <div class="bg-pink disabled color-palette">
                                        <span id="lazyfree-lazy-user-flush-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
                <!-- COLOR PALETTE -->
                <div class="card card-default color-palette-box">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tag"></i>
                            time limit
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-orange">lua-time-limit</h4>
                                <div class="color-palette-set">
                                    <div class="bg-orange color-palette"><span></span></div>
                                    <div class="bg-orange disabled color-palette">
                                        <span id="lua-time-limit-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-maroon">slowlog-log-slower-than</h4>
                                <div class="color-palette-set">
                                    <div class="bg-maroon color-palette"><span></span></div>
                                    <div class="bg-maroon disabled color-palette">
                                        <span id="slowlog-log-slower-than-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
                <!-- COLOR PALETTE -->
                <div class="card card-default color-palette-box">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tag"></i>
                            logging
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-orange">syslog-ident</h4>
                                <div class="color-palette-set">
                                    <div class="bg-orange color-palette"><span></span></div>
                                    <div class="bg-orange disabled color-palette">
                                        <span id="syslog-ident-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.col -->
                            <div class="col-sm-4 col-md-2">
                                <h4 class="text-center bg-maroon">loglevel</h4>
                                <div class="color-palette-set">
                                    <div class="bg-maroon color-palette"><span></span></div>
                                    <div class="bg-maroon disabled color-palette">
                                        <span id="loglevel-value" style="float: left;"></span>
                                        <button type="button" class="btn btn-block btn-outline-light edit-button">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
        <div class="p-3">
            <h5>Title</h5>
            <p>Sidebar content</p>
        </div>
    </aside>
    <!-- /.control-sidebar -->

    <!-- Main Footer -->
    <footer class="main-footer">
        <!-- To the right -->
        <div class="float-right d-none d-sm-inline">
            Anything you want
        </div>
        <!-- Default to the left -->
        <strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights reserved.
    </footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- FLOT CHARTS -->
<script src="plugins/flot/jquery.flot.js"></script>
<!-- jsGrid -->
<script src="plugins/jsgrid/jsgrid.min.js"></script>
<!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized -->
<script src="plugins/flot/plugins/jquery.flot.resize.js"></script>
<script>
    $(function () {
        $("#sidebar").load("sidebar.html")

        // memory-purge 버튼 이벤트
        $("#memory-purge-edit").click(function() {
            document.getElementById('memory-purge-value').style.display="none"
            document.getElementById('memory-purge-edit').style.display="none"
            document.getElementById('memory-purge-new-value').style.display="block"
            document.getElementById('memory-purge-submit').style.display="block"
        });
        $("#memory-purge-submit").click(function() {
            // update API 호출

            // 화면 표시 값 업데이트(update() 다시 호출 or 값 변경

            // UI 변경
            document.getElementById('memory-purge-new-value').style.display="none"
            document.getElementById('memory-purge-submit').style.display="none"
            document.getElementById('memory-purge-value').style.display="block"
            document.getElementById('memory-purge-edit').style.display="block"
        });

        // activedefrag 버튼 이벤트
        $("#activedefrag-edit").click(function() {
            document.getElementById('activedefrag-value').style.display="none"
            document.getElementById('activedefrag-edit').style.display="none"
            document.getElementById('activedefrag-new-value').style.display="block"
            document.getElementById('activedefrag-submit').style.display="block"
        });
        $("#activedefrag-submit").click(function() {
            // update API 호출

            // 화면 표시 값 업데이트(update() 다시 호출 or 값 변경

            // UI 변경
            document.getElementById('activedefrag-new-value').style.display="none"
            document.getElementById('activedefrag-submit').style.display="none"
            document.getElementById('activedefrag-value').style.display="block"
            document.getElementById('activedefrag-edit').style.display="block"
        });

        // maxmemory-policy 버튼 이벤트
        $("#maxmemory-policy-edit").click(function() {
            document.getElementById('maxmemory-policy-value').style.display="none"
            document.getElementById('maxmemory-policy-edit').style.display="none"
            document.getElementById('maxmemory-policy-new-value').style.display="block"
            document.getElementById('maxmemory-policy-submit').style.display="block"
        });
        $("#maxmemory-policy-submit").click(function() {
            // update API 호출

            // 화면 표시 값 업데이트(update() 다시 호출 or 값 변경

            // UI 변경
            document.getElementById('maxmemory-policy-new-value').style.display="none"
            document.getElementById('maxmemory-policy-submit').style.display="none"
            document.getElementById('maxmemory-policy-value').style.display="block"
            document.getElementById('maxmemory-policy-edit').style.display="block"
        });

        // maxmemory-samples 버튼 이벤트
        $("#maxmemory-samples-edit").click(function() {
            document.getElementById('maxmemory-samples-value').style.display="none"
            document.getElementById('maxmemory-samples-edit').style.display="none"
            document.getElementById('maxmemory-samples-new-value').style.display="block"
            document.getElementById('maxmemory-samples-submit').style.display="block"
        });
        $("#maxmemory-samples-submit").click(function() {
            // update API 호출

            // 화면 표시 값 업데이트(update() 다시 호출 or 값 변경

            // UI 변경
            document.getElementById('maxmemory-samples-new-value').style.display="none"
            document.getElementById('maxmemory-samples-submit').style.display="none"
            document.getElementById('maxmemory-samples-value').style.display="block"
            document.getElementById('maxmemory-samples-edit').style.display="block"
        });

        // maxmemory 버튼 이벤트
        $("#maxmemory-edit").click(function() {
            document.getElementById('maxmemory-value').style.display="none"
            document.getElementById('maxmemory-edit').style.display="none"
            document.getElementById('maxmemory-new-value').style.display="block"
            document.getElementById('maxmemory-submit').style.display="block"
        });
        $("#maxmemory-submit").click(function() {
            // update API 호출

            // 화면 표시 값 업데이트(update() 다시 호출 or 값 변경

            // UI 변경
            document.getElementById('maxmemory-new-value').style.display="none"
            document.getElementById('maxmemory-submit').style.display="none"
            document.getElementById('maxmemory-value').style.display="block"
            document.getElementById('maxmemory-edit').style.display="block"
        });

        // timeout 버튼 이벤트
        $("#timeout-edit").click(function() {
            document.getElementById('timeout-value').style.display="none"
            document.getElementById('timeout-edit').style.display="none"
            document.getElementById('timeout-new-value').style.display="block"
            document.getElementById('timeout-submit').style.display="block"
        });
        $("#timeout-submit").click(function() {
            // update API 호출

            // 화면 표시 값 업데이트(update() 다시 호출 or 값 변경

            // UI 변경
            document.getElementById('timeout-new-value').style.display="none"
            document.getElementById('timeout-submit').style.display="none"
            document.getElementById('timeout-value').style.display="block"
            document.getElementById('timeout-edit').style.display="block"
        });

        // maxclients 버튼 이벤트
        $("#maxclients-edit").click(function() {
            document.getElementById('maxclients-value').style.display="none"
            document.getElementById('maxclients-edit').style.display="none"
            document.getElementById('maxclients-new-value').style.display="block"
            document.getElementById('maxclients-submit').style.display="block"
        });
        $("#maxclients-submit").click(function() {
            // update API 호출

            // 화면 표시 값 업데이트(update() 다시 호출 or 값 변경

            // UI 변경
            document.getElementById('maxclients-new-value').style.display="none"
            document.getElementById('maxclients-submit').style.display="none"
            document.getElementById('maxclients-value').style.display="block"
            document.getElementById('maxclients-edit').style.display="block"
        });

        function insertValue() {
            document.getElementById("maxmemory-policy-value").innerHTML = data[data.length - 1].redisInfoList.sum.memory.maxmemoryPolicy
            document.getElementById("maxmemory-policy-new-value").placeholder = data[data.length - 1].redisInfoList.sum.memory.maxmemoryPolicy

            document.getElementById("maxmemory-value").innerHTML = data[data.length - 1].redisInfoList.sum.memory.maxmemoryHuman
            document.getElementById("maxmemory-new-value").placeholder = data[data.length - 1].redisInfoList.sum.memory.maxmemoryHuman

            document.getElementById("maxclients-value").innerHTML = data[data.length - 1].redisInfoList.sum.clients.maxclients
            document.getElementById("maxclients-new-value").placeholder = data[data.length - 1].redisInfoList.sum.clients.maxclients

            document.getElementById("appendonly-value").innerHTML = data[data.length - 1].redisInfoList.sum.persistence.aofEnabled
            document.getElementById("appendonly-new-value").placeholder = data[data.length - 1].redisInfoList.sum.persistence.aofEnabled
        }

        function update() {
            // API 호출
            fetch("/v1/redis/stats")
            .then(response => response.json())
            .then(data => {
                currentTime = data[data.length - 1].epochTime
            })
            insertValue()
        }
        update()
    })
</script>
</body>
</html>
